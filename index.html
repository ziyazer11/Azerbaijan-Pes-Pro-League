<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Azerbaijan Pes Pro League | Official Portal</title>
    <link rel="stylesheet" href="style.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Orbitron:wght@600;800&display=swap"
        rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body>
    <div id="news-ticker-bar" class="news-ticker-bar">
        <div class="ticker-wrapper">
            <div id="ticker-content" class="ticker-content">Loading latest news...</div>
        </div>
    </div>
    <div class="bg-gradient"></div>

    <header>
        <div class="logo">Azerbaijan Pes Pro League</div>

        <div class="header-center">
            <div id="next-match-countdown" class="countdown-container" style="display: none;">
                <span class="countdown-label">NEXT MATCH IN</span>
                <div class="countdown-timer">
                    <span id="days">00</span><small>d</small>
                    <span id="hours">00</span><small>h</small>
                    <span id="minutes">00</span><small>m</small>
                    <span id="seconds">00</span><small>s</small>
                </div>
            </div>
        </div>

        <div class="header-right">
            <div class="social-links">
                <a href="https://www.instagram.com/azerbaijanpesproleague" target="_blank" class="social-icon"
                    title="Instagram"><i data-lucide="instagram"></i></a>
                <a href="https://discord.com/channels/1477294808623218718/1477295957866713309" target="_blank"
                    class="social-icon" title="Discord">
                    <svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18">
                        <path
                            d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z" />
                    </svg>
                </a>
            </div>
            <button class="btn-leaderboard" onclick="openModal('leaderboard-modal')">LEADERBOARD</button>
            <button class="btn-history" onclick="openModal('match-history-modal')">HISTORY</button>
            <button id="login-trigger-btn" class="btn-admin">ADMIN LOGIN</button>
        </div>
    </header>

    <main>
        <section class="hero">
            <h1>PREMIER LEAGUE</h1>
            <p>The elite competition for PES players around the world. Register now and prove your skills on the pitch.
            </p>
        </section>

        <section id="standings">
            <h2 class="section-title">LEAGUE STANDINGS</h2>
            <div class="glass-card standings-container">
                <table>
                    <thead>
                        <tr>
                            <th class="rank">#</th>
                            <th>TEAM</th>
                            <th>P</th>
                            <th>W</th>
                            <th>D</th>
                            <th>L</th>
                            <th>GD</th>
                            <th>FORM</th>
                            <th class="pts">PTS</th>
                        </tr>
                    </thead>
                    <tbody id="standings-body">
                        <!-- JS Render -->
                    </tbody>
                </table>
            </div>
        </section>

        <section id="results">
            <h2 class="section-title" style="color: var(--secondary);">LATEST RESULTS</h2>
            <div id="results-list" class="schedule-list" style="margin-bottom: 4rem;">
                <!-- JS Render -->
            </div>
        </section>

        <section id="schedule">
            <h2 class="section-title">MATCH SCHEDULE</h2>
            <div id="schedule-list" class="schedule-list">
                <!-- JS Render -->
            </div>
        </section>


        <section id="join-section">
            <h2 class="section-title">JOIN THE COMPETITION</h2>
            <div class="glass-card contact-card">
                <div class="contact-details">
                    <div class="contact-item">
                        <span class="label">EMAIL US</span>
                        <a href="mailto:azerbaijanpespremierleague@gmail.com">azerbaijanpespremierleague@gmail.com</a>
                    </div>
                    <div class="contact-item">
                        <span class="label">CALL US</span>
                        <a href="tel:+9940507354196">+994 050 735 41 96</a>
                    </div>
                </div>
                <a href="https://docs.google.com/forms/d/1klTqNIK1AGQmH05GfXd6VQIFCREdYfX7Fvj9pADJZb0/edit"
                    target="_blank" class="btn-join-large">CLICK HERE TO JOIN COMPETITION</a>
            </div>
        </section>

        <!-- Admin Dashboard (Only visible when logged in) -->
        <section id="admin-section" style="display: none;">
            <h2 class="section-title">ADMIN CONTROL PANEL</h2>

            <div class="glass-card">
                <h3>MANAGE TEAMS</h3>
                <div class="form-group" style="display: flex; gap: 1rem; margin-top: 1rem;">
                    <input type="text" id="new-team-name" placeholder="Enter Team Name">
                    <button class="btn-primary" onclick="addTeam()" style="width: 150px;">ADD TEAM</button>
                </div>
            </div>

            <div class="glass-card">
                <h3>TOURNAMENT ZONES</h3>
                <p style="color: var(--text-dim); font-size: 0.8rem; margin-bottom: 1rem;">Set how many teams go through
                    to each stage (from top to bottom).</p>
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem;">
                    <div class="form-group">
                        <label>Next Round (Top X)</label>
                        <input type="number" id="zone-next-count" value="2" onchange="updateZones()">
                    </div>
                    <div class="form-group">
                        <label>Playoffs (Next X)</label>
                        <input type="number" id="zone-playoff-count" value="2" onchange="updateZones()">
                    </div>
                    <div class="form-group">
                        <label>Out (Bottom X)</label>
                        <input type="number" id="zone-out-count" value="2" onchange="updateZones()">
                    </div>
                </div>
            </div>

            <div class="glass-card">
                <h3>NEWS BAR</h3>
                <p style="color: var(--text-dim); font-size: 0.8rem; margin-bottom: 1rem;">Update the scrolling news
                    ticker at the top of the site.</p>
                <div style="display: flex; gap: 1rem;">
                    <input type="text" id="admin-news-input" placeholder="Enter latest news..." style="flex: 1;">
                    <button class="btn-primary" onclick="updateNewsTicker()" style="width: 120px;">UPDATE</button>
                </div>
            </div>

            <div class="glass-card">
                <h3>SCHEDULE NEW MATCH</h3>
                <form onsubmit="scheduleMatch(event)"
                    style="display: grid; grid-template-columns: 1fr 1fr 1fr auto; gap: 1rem; margin-top: 1rem; align-items: end;">
                    <div class="form-group">
                        <label>Team 1</label>
                        <select id="match-t1" required></select>
                    </div>
                    <div class="form-group">
                        <label>Team 2</label>
                        <select id="match-t2" required></select>
                    </div>
                    <div class="form-group">
                        <label>Date & Time</label>
                        <input type="datetime-local" id="match-datetime" required>
                    </div>
                    <button type="submit" class="btn-primary" style="height: 45px;">CREATE</button>
                </form>
            </div>
        </section>
    </main>

    <!-- Admin Login Modal -->
    <div id="admin-login-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('admin-login-modal')">&times;</span>
            <h2 style="font-family: var(--font-heading); margin-bottom: 2rem; color: var(--primary);">SECURE ACCESS</h2>
            <form onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label>Email Address</label>
                    <input type="email" id="login-email" required>
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="login-pass" required>
                </div>
                <button type="submit" class="btn-primary">AUTHENTICATE</button>
            </form>
        </div>
    </div>
    <!-- Result Modal (Admin) -->
    <div id="result-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('result-modal')">&times;</span>
            <h2 style="font-family: var(--font-heading); margin-bottom: 2rem; color: var(--primary);">RECORD RESULT</h2>
            <form id="result-form" onsubmit="saveMatchResult(event)">
                <input type="hidden" id="result-match-id">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div class="form-group">
                        <label id="result-team1-label">Team 1</label>
                        <input type="number" id="result-score1" required min="0">
                    </div>
                    <div class="form-group">
                        <label id="result-team2-label">Team 2</label>
                        <input type="number" id="result-score2" required min="0">
                    </div>
                </div>
                <div class="form-group" style="margin-top: 1rem;">
                    <label>UPLOAD HIGHLIGHTS URL (YouTube/Twitch/etc)</label>
                    <input type="url" id="result-highlights" placeholder="https://youtube.com/...">
                </div>

                <div class="form-group" style="margin-top: 1.5rem;">
                    <label>OR UPLOAD VIDEO HIGHLIGHTS</label>
                    <div id="highlights-drop-zone" class="drop-zone"
                        onclick="document.getElementById('highlights-file-input').click()">
                        <i data-lucide="upload-cloud"></i>
                        <span>Drag & Drop MP4 file or click to browse</span>
                        <input type="file" id="highlights-file-input" accept="video/*" style="display: none;">
                    </div>
                    <div id="upload-status"
                        style="margin-top: 0.5rem; font-size: 0.8rem; color: var(--secondary); display: none;">
                        Uploading: <span id="upload-percent">0</span>%
                    </div>
                </div>
                <button type="submit" class="btn-primary" style="margin-top: 1rem;">SAVE RESULT</button>
            </form>
        </div>
    </div>

    <!-- Match History Modal -->
    <div id="match-history-modal" class="modal">
        <div class="modal-content history-modal">
            <span class="close-modal" onclick="closeModal('match-history-modal')">&times;</span>
            <h2 style="font-family: var(--font-heading); margin-bottom: 2rem; color: var(--secondary);">MATCH HISTORY
            </h2>
            <div id="admin-match-history" class="schedule-list history-scroll">
                <!-- JS Render -->
            </div>
        </div>
    </div>

    <!-- Leaderboard Modal -->
    <div id="leaderboard-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('leaderboard-modal')">&times;</span>
            <h2 style="font-family: var(--font-heading); margin-bottom: 2rem; color: var(--accent);">PREDICTION
                LEADERBOARD</h2>
            <div id="leaderboard-content">
                <table class="leaderboard-table">
                    <thead>
                        <tr>
                            <th>RANK</th>
                            <th>USER</th>
                            <th>POINTS</th>
                        </tr>
                    </thead>
                    <tbody id="leaderboard-body">
                        <!-- JS Render -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Prediction Modal -->
    <div id="prediction-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('prediction-modal')">&times;</span>
            <h2 id="predict-title"
                style="font-family: var(--font-heading); margin-bottom: 1rem; color: var(--az-blue);">PREDICT SCORE</h2>
            <form id="prediction-form" onsubmit="submitPrediction(event)">
                <input type="hidden" id="predict-match-id">
                <div class="form-group">
                    <label>Your Name</label>
                    <input type="text" id="predict-user-name" required placeholder="Enter your display name">
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 1rem;">
                    <div class="form-group">
                        <label id="predict-team1-label">Team 1 Score</label>
                        <input type="number" id="predict-score1" required min="0">
                    </div>
                    <div class="form-group">
                        <label id="predict-team2-label">Team 2 Score</label>
                        <input type="number" id="predict-score2" required min="0">
                    </div>
                </div>
                <button type="submit" class="btn-primary" style="margin-top: 1rem;">SUBMIT PREDICTION</button>
            </form>
        </div>
    </div>

    <footer
        style="text-align: center; padding: 4rem; color: var(--text-dim); border-top: 1px solid var(--glass-border);">
        <p>&copy; 2026 Azerbaijan PES Pro League. Hosted on Vercel.</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="app.js"></script>
    <script>
        lucide.createIcons();
    </script>
</body>

</html>