<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Azerbaijan Pes Pro League | Official Portal</title>
    <link rel="stylesheet" href="style.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Orbitron:wght@600;800&display=swap"
        rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body>
    <div id="news-ticker-bar" class="news-ticker-bar">
        <div class="ticker-wrapper">
            <div id="ticker-content" class="ticker-content" data-i18n="loading_news">Loading latest news...</div>
        </div>
    </div>
    <div class="bg-gradient"></div>

    <!-- Live Match Banner -->
    <div id="live-match-banner" style="display:none;" class="live-banner">
        <span class="live-dot"></span>
        <span id="live-banner-text">ðŸ”´ LIVE NOW: Loading...</span>
    </div>

    <header>
        <div class="logo">Azerbaijan Pes Pro League</div>

        <div class="header-center">
            <div id="next-match-countdown" class="countdown-container" style="display: none;">
                <span class="countdown-label" data-i18n="next_match">NEXT MATCH IN</span>
                <div class="countdown-timer">
                    <span id="days">00</span><small>d</small>
                    <span id="hours">00</span><small>h</small>
                    <span id="minutes">00</span><small>m</small>
                    <span id="seconds">00</span><small>s</small>
                </div>
            </div>
        </div>

        <div class="header-right">
            <div class="header-right">
                <div class="user-prefs"
                    style="display: flex; gap: 1rem; margin-right: 1rem; align-items: center; border-right: 1px solid var(--glass-border); padding-right: 1rem;">
                    <select id="user-timezone-select" onchange="updateUserTimezone()"
                        style="background: rgba(0,0,0,0.5); border: 1px solid var(--glass-border); color: var(--text-main); font-size: 0.8rem; padding: 0.2rem 0.5rem; border-radius: 4px; cursor: pointer;">
                        <option value="Asia/Baku">AZT (Baku)</option>
                        <option value="Europe/London">GMT/BST (London)</option>
                        <option value="Europe/Paris">CET/CEST (Paris)</option>
                        <option value="Europe/Istanbul">TRT (Istanbul)</option>
                        <option value="America/New_York">EST/EDT (New York)</option>
                        <option value="America/Los_Angeles">PST/PDT (LA)</option>
                        <option value="UTC">UTC</option>
                    </select>
                    <div class="lang-switcher" style="display: flex; gap: 0.5rem; align-items: center;">
                        <button id="btn-en" class="lang-btn active" onclick="setLanguage('en')">EN</button>
                        <span style="color: var(--text-dim);">|</span>
                        <button id="btn-az" class="lang-btn" onclick="setLanguage('az')">AZ</button>
                    </div>
                </div>

                <div class="social-links">
                    <a href="https://www.instagram.com/azerbaijanpesproleague" target="_blank" class="social-icon"
                        title="Instagram"><i data-lucide="instagram"></i></a>
                    <a href="https://discord.com/channels/1477294808623218718/1477295957866713309" target="_blank"
                        class="social-icon" title="Discord">
                        <svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18">
                            <path
                                d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z" />
                        </svg>
                    </a>
                </div>
                <button class="btn-leaderboard" onclick="openModal('leaderboard-modal')"
                    data-i18n="leaderboard">LEADERBOARD</button>
                <button class="btn-history" onclick="openModal('match-history-modal')"
                    data-i18n="history">HISTORY</button>
                <button id="login-trigger-btn" class="btn-admin" onclick="loginBtnClick()" data-i18n="admin_login">ADMIN
                    LOGIN</button>
            </div>
    </header>

    <main>
        <section class="hero">
            <h1 data-i18n="premier_league">PREMIER LEAGUE</h1>
            <p data-i18n="hero_desc">The elite competition for PES players around the world. Register now and prove your
                skills on the pitch.</p>
        </section>

        <section id="standings">
            <h2 class="section-title" data-i18n="league_standings">LEAGUE STANDINGS</h2>
            <div class="glass-card standings-container">
                <table>
                    <thead>
                        <tr>
                            <th class="rank">#</th>
                            <th data-i18n="team">TEAM</th>
                            <th>P</th>
                            <th>W</th>
                            <th>D</th>
                            <th>L</th>
                            <th>GD</th>
                            <th data-i18n="form">FORM</th>
                            <th class="pts" data-i18n="pts">PTS</th>
                        </tr>
                    </thead>
                    <tbody id="standings-body">
                        <!-- JS Render -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Weekly Awards -->
        <!-- Weekly Awards Section -->
        <section id="weekly-awards" style="margin-bottom: 3rem;">
            <h2 class="section-title" style="color: gold;" data-i18n="weekly_awards">WEEKLY AWARDS</h2>
            <div id="awards-container" class="awards-grid">
                <!-- Awards rendered dynamically -->
            </div>
        </section>

        <section id="results">
            <h2 class="section-title" style="color: var(--secondary);" data-i18n="latest_results">LATEST RESULTS</h2>
            <div id="results-list" class="schedule-list" style="margin-bottom: 4rem;">
                <!-- JS Render -->
            </div>
        </section>

        <!-- Knockout Bracket -->
        <section id="knockout-stage" style="margin-bottom: 3rem;">
            <h2 class="section-title" style="color: var(--az-red);" data-i18n="knockout_stage">KNOCKOUT STAGE</h2>
            <div class="bracket-container" style="overflow-x: auto; padding-bottom: 1rem;">
                <div class="bracket" id="knockout-bracket">
                    <!-- JS Render Bracket Tree -->
                </div>
            </div>
        </section>

        <!-- Trash Talk Section -->
        <section id="trash-talk-section" style="margin-bottom: 3rem;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <h2 class="section-title" style="color: var(--accent);" data-i18n="trash_talk_board">TRASH TALK BOARD
                </h2>
                <button class="btn-primary" onclick="openModal('trash-talk-modal')"
                    style="padding: 0.5rem 1rem; border-radius: 20px;">
                    <i data-lucide="message-square"></i> <span data-i18n="post_trash_talk">POST</span>
                </button>
            </div>
            <div id="trash-talk-container" class="awards-grid" style="gap: 1rem;">
                <!-- Trash talk posts rendered here -->
            </div>
        </section>

        <section id="schedule">
            <h2 class="section-title" data-i18n="match_schedule">MATCH SCHEDULE</h2>
            <div id="schedule-list" class="schedule-list">
                <!-- JS Render -->
            </div>
        </section>


        <section id="join-section">
            <h2 class="section-title" data-i18n="join_competition">JOIN THE COMPETITION</h2>
            <div class="glass-card contact-card">
                <div class="contact-details">
                    <div class="contact-item">
                        <span class="label" data-i18n="email_us">EMAIL US</span>
                        <a href="mailto:azerbaijanpespremierleague@gmail.com">azerbaijanpespremierleague@gmail.com</a>
                    </div>
                    <div class="contact-item">
                        <span class="label" data-i18n="call_us">CALL US</span>
                        <a href="tel:+9940507354196">+994 050 735 41 96</a>
                    </div>
                </div>
                <a href="https://docs.google.com/forms/d/1klTqNIK1AGQmH05GfXd6VQIFCREdYfX7Fvj9pADJZb0/edit"
                    target="_blank" class="btn-join-large" data-i18n="click_to_join">CLICK HERE TO JOIN COMPETITION</a>
            </div>
        </section>

        <!-- Admin Dashboard (Only visible when logged in) -->
        <section id="admin-section" style="display: none;">
            <h2 class="section-title" data-i18n="admin_cp">ADMIN CONTROL PANEL</h2>

            <div class="glass-card">
                <h3 data-i18n="manage_teams">MANAGE TEAMS</h3>
                <div class="form-group" style="display: flex; gap: 1rem; margin-top: 1rem;">
                    <input type="text" id="new-team-name" placeholder="Enter Team Name" data-i18n="enter_team_name">
                    <button class="btn-primary" onclick="addTeam()" style="width: 150px;" data-i18n="add_team">ADD
                        TEAM</button>
                </div>
            </div>

            <div class="glass-card">
                <h3 data-i18n="tournament_zones">TOURNAMENT ZONES</h3>
                <p style="color: var(--text-dim); font-size: 0.8rem; margin-bottom: 1rem;" data-i18n="zone_desc">Set how
                    many teams go through
                    to each stage (from top to bottom).</p>
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem;">
                    <div class="form-group">
                        <label data-i18n="next_round">Next Round (Top X)</label>
                        <input type="number" id="zone-next-count" value="2" onchange="updateZones()">
                    </div>
                    <div class="form-group">
                        <label data-i18n="playoffs">Playoffs (Next X)</label>
                        <input type="number" id="zone-playoff-count" value="2" onchange="updateZones()">
                    </div>
                    <div class="form-group">
                        <label data-i18n="out_zone">Out (Bottom X)</label>
                        <input type="number" id="zone-out-count" value="2" onchange="updateZones()">
                    </div>
                </div>
            </div>

            <div class="glass-card">
                <h3 data-i18n="news_bar">NEWS BAR</h3>
                <p style="color: var(--text-dim); font-size: 0.8rem; margin-bottom: 1rem;" data-i18n="news_desc">Update
                    the scrolling news
                    ticker at the top of the site.</p>
                <div style="display: flex; gap: 1rem;">
                    <input type="text" id="admin-news-input" placeholder="Enter latest news..." style="flex: 1;"
                        data-i18n="enter_news">
                    <button class="btn-primary" onclick="updateNewsTicker()" style="width: 120px;"
                        data-i18n="update">UPDATE</button>
                </div>
            </div>

            <div class="glass-card">
                <h3 data-i18n="schedule_new_match">SCHEDULE NEW MATCH</h3>
                <form onsubmit="scheduleMatch(event)"
                    style="display: grid; grid-template-columns: 1fr 1fr 1fr auto; gap: 1rem; margin-top: 1rem; align-items: end;">
                    <div class="form-group">
                        <label data-i18n="team_1">Team 1</label>
                        <select id="match-t1" required></select>
                    </div>
                    <div class="form-group">
                        <label data-i18n="team_2">Team 2</label>
                        <select id="match-t2" required></select>
                    </div>
                    <div class="form-group">
                        <label data-i18n="date_time">Date & Time</label>
                        <input type="datetime-local" id="match-datetime" required>
                    </div>
                    <div class="form-group">
                        <label data-i18n="stage">Stage</label>
                        <select id="match-stage" required>
                            <option value="1">Week 1</option>
                            <option value="2">Week 2</option>
                            <option value="3">Week 3</option>
                            <option value="4">Week 4</option>
                            <option value="5">Week 5</option>
                            <option value="6">Week 6</option>
                            <option value="7">Week 7</option>
                            <option value="8">Week 8</option>
                            <option value="QF">Quarter Final</option>
                            <option value="SF">Semi Final</option>
                            <option value="F">Final</option>
                        </select>
                    </div>
                    <button type="submit" class="btn-primary" style="height: 45px;" data-i18n="create">CREATE</button>
                </form>
            </div>
        </section>
    </main>

    <!-- Trash Talk Modal -->
    <div id="trash-talk-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('trash-talk-modal')"><i data-lucide="x"></i></span>
            <h2 data-i18n="post_trash_talk" id="trash-talk-modal-title"
                style="color: var(--accent); margin-bottom: 1rem;">POST TRASH TALK</h2>
            <form id="trash-talk-form" onsubmit="submitTrashTalk(event)">
                <input type="hidden" id="trash-talk-reply-id" value="">
                <div class="form-group">
                    <label data-i18n="select_match">Select Match</label>
                    <select id="trash-talk-match-id" required>
                        <option value="">-- General / No Match --</option>
                        <!-- Populated dynamically -->
                    </select>
                </div>
                <div class="form-group">
                    <label data-i18n="your_name">Your Name</label>
                    <input type="text" id="trash-talk-author" placeholder="Manager Name" required
                        data-i18n="enter_display_name">
                </div>
                <div class="form-group">
                    <label data-i18n="message">Message</label>
                    <textarea id="trash-talk-message" rows="4" placeholder="Let them have it..." required></textarea>
                </div>
                <button type="submit" class="btn-primary" style="width: 100%; margin-top: 1rem;"
                    data-i18n="post_it">POST IT ðŸ”¥</button>
            </form>
        </div>
    </div>

    <!-- Admin Login Modal -->
    <div id="admin-login-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('admin-login-modal')">&times;</span>
            <h2 style="font-family: var(--font-heading); margin-bottom: 2rem; color: var(--primary);"
                data-i18n="secure_access">SECURE ACCESS</h2>
            <form onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label data-i18n="email_address">Email Address</label>
                    <input type="email" id="login-email" required>
                </div>
                <div class="form-group">
                    <label data-i18n="password">Password</label>
                    <input type="password" id="login-pass" required>
                </div>
                <button type="submit" class="btn-primary" data-i18n="authenticate">AUTHENTICATE</button>
            </form>
        </div>
    </div>
    <!-- Result Modal (Admin) -->
    <div id="result-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('result-modal')">&times;</span>
            <h2 style="font-family: var(--font-heading); margin-bottom: 2rem; color: var(--primary);"
                data-i18n="record_result">RECORD RESULT</h2>
            <form id="result-form" onsubmit="saveMatchResult(event)">
                <input type="hidden" id="result-match-id">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div class="form-group">
                        <label id="result-team1-label">Team 1</label>
                        <input type="number" id="result-score1" required min="0">
                    </div>
                    <div class="form-group">
                        <label id="result-team2-label">Team 2</label>
                        <input type="number" id="result-score2" required min="0">
                    </div>
                </div>
                <div class="form-group" style="margin-top: 1rem;">
                    <label data-i18n="upload_highlights_url">UPLOAD HIGHLIGHTS URL (YouTube/Twitch/etc)</label>
                    <input type="url" id="result-highlights" placeholder="https://youtube.com/..."
                        data-i18n="enter_highlights_url">
                </div>

                <div class="form-group" style="margin-top: 1.5rem;">
                    <label data-i18n="or_upload_video">OR UPLOAD VIDEO HIGHLIGHTS</label>
                    <div id="highlights-drop-zone" class="drop-zone"
                        onclick="document.getElementById('highlights-file-input').click()">
                        <i data-lucide="upload-cloud"></i>
                        <span data-i18n="drag_drop">Drag & Drop MP4 file or click to browse</span>
                        <input type="file" id="highlights-file-input" accept="video/*" style="display: none;">
                    </div>
                    <div id="upload-status"
                        style="margin-top: 0.5rem; font-size: 0.8rem; color: var(--secondary); display: none;">
                        Uploading: <span id="upload-percent">0</span>%
                    </div>
                </div>
                <button type="submit" class="btn-primary" style="margin-top: 1rem;" data-i18n="save_result">SAVE
                    RESULT</button>
            </form>
        </div>
    </div>

    <!-- Match History Modal -->
    <div id="match-history-modal" class="modal">
        <div class="modal-content history-modal">
            <span class="close-modal" onclick="closeModal('match-history-modal')">&times;</span>
            <h2 style="font-family: var(--font-heading); margin-bottom: 2rem; color: var(--secondary);"
                data-i18n="match_history">MATCH HISTORY
            </h2>
            <div id="admin-match-history" class="schedule-list history-scroll">
                <!-- JS Render -->
            </div>
        </div>
    </div>

    <!-- Leaderboard Modal -->
    <div id="leaderboard-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('leaderboard-modal')">&times;</span>
            <h2 style="font-family: var(--font-heading); margin-bottom: 2rem; color: var(--accent);"
                data-i18n="prediction_leaderboard">PREDICTION
                LEADERBOARD</h2>
            <div id="leaderboard-content">
                <table class="leaderboard-table">
                    <thead>
                        <tr>
                            <th data-i18n="rank">RANK</th>
                            <th data-i18n="user">USER</th>
                            <th data-i18n="points">POINTS</th>
                        </tr>
                    </thead>
                    <tbody id="leaderboard-body">
                        <!-- JS Render -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Prediction Modal -->
    <div id="prediction-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('prediction-modal')">&times;</span>
            <h2 id="predict-title" style="font-family: var(--font-heading); margin-bottom: 1rem; color: var(--az-blue);"
                data-i18n="predict_score">PREDICT SCORE</h2>
            <form id="prediction-form" onsubmit="submitPrediction(event)">
                <input type="hidden" id="predict-match-id">
                <div class="form-group">
                    <label data-i18n="your_name">Your Name</label>
                    <input type="text" id="predict-user-name" required placeholder="Enter your display name"
                        data-i18n="enter_display_name">
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 1rem;">
                    <div class="form-group">
                        <label id="predict-team1-label">Team 1 Score</label>
                        <input type="number" id="predict-score1" required min="0">
                    </div>
                    <div class="form-group">
                        <label id="predict-team2-label">Team 2 Score</label>
                        <input type="number" id="predict-score2" required min="0">
                    </div>
                </div>
                <button type="submit" class="btn-primary" style="margin-top: 1rem;" data-i18n="submit_prediction">SUBMIT
                    PREDICTION</button>
            </form>
        </div>
    </div>

    <!-- Trash Talk Modal -->
    <div id="trash-talk-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('trash-talk-modal')">&times;</span>
            <h2 style="font-family: var(--font-heading); margin-bottom: 1rem; color: var(--accent);">ðŸ”¥ DROP YOUR TAKE
            </h2>
            <input type="hidden" id="tt-match-id">
            <p id="tt-match-label" style="color: var(--text-dim); margin-bottom: 1.5rem;"></p>
            <div class="form-group">
                <label>Your Name</label>
                <input type="text" id="tt-author" placeholder="Enter your name">
            </div>
            <div class="form-group" style="margin-top:1rem;">
                <label>Your message (max 150 chars)</label>
                <textarea id="tt-message" maxlength="150" rows="3"
                    style="width:100%; background: rgba(255,255,255,0.05); border: 1px solid var(--glass-border); border-radius: 8px; padding: 0.8rem; color: var(--text-main); font-family: var(--font-main); resize: none;"></textarea>
            </div>
            <button class="btn-primary" style="margin-top:1rem;" onclick="postTrashTalk()">SEND IT ðŸ”¥</button>
        </div>
    </div>

    <footer
        style="text-align: center; padding: 4rem; color: var(--text-dim); border-top: 1px solid var(--glass-border);">
        <p>&copy; 2026 Azerbaijan PES Pro League. Hosted on Vercel.</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="app.js"></script>
    <script>
        lucide.createIcons();
    </script>
</body>

</html>